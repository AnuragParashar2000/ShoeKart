import{r as l,j as e,T as N,f as n,A as u}from"./index-eab7dac9.js";import{C as y}from"./CustomerTable-6fc825d1.js";const S=()=>{const[x,h]=l.useState([]),[g,p]=l.useState(!0),f=async()=>{var a,i;try{const t=localStorage.getItem("jwtAdmin");if(!t)return n.error("Access denied. Please login first.");const s=await u.get("/brands",{headers:{Authorization:t}});console.log(s.data),s.data.success&&h(s.data.brands),p(!1)}catch(t){n.error((i=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:i.message),p(!1)}};l.useEffect(()=>{f()},[]);const j=[{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Active Products",accessor:"activeProducts"},{Header:"Total Products",accessor:"totalProducts"}],[r,d]=l.useState({id:"",name:"",description:"",email:"",isActivate:!0}),v=a=>{d({id:a._id,name:a.name,description:a.description,email:a.email,isActivate:a.isActivate})},m=()=>{d({id:"",name:"",description:"",email:"",isActivate:!0})},b=a=>async()=>{var i,t;try{if(!a)return n.error("Please select a brand to update.");const s=localStorage.getItem("jwtAdmin");if(!s)return n.error("Access denied.");const c=await u.put(`/brands/${a}`,{...r},{headers:{Authorization:s}});n.success(c.data.message),h(c.data.brands),m()}catch(s){n.error((t=(i=s==null?void 0:s.response)==null?void 0:i.data)==null?void 0:t.message),m()}},o=a=>{d({...r,[a.target.id]:a.target.value})},A=async a=>{var i,t;a.preventDefault();try{if(!r.name||!r.description||!r.email)return n.error("Please fill all the fields.");const s=localStorage.getItem("jwtAdmin");if(!s)return n.error("Access denied.");const c=await u.post("/brands",{...r},{headers:{Authorization:s}});n.success(c.data.message),f(),m()}catch(s){n.error((t=(i=s==null?void 0:s.response)==null?void 0:i.data)==null?void 0:t.message)}};return g?e.jsx(N,{height:"500px"}):e.jsxs("div",{className:"dashboardMain",children:[e.jsx("h1",{children:"Brands"}),e.jsx("div",{className:"dashOverview dash-forms",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"inputs",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter brand name",onChange:o,value:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{type:"text",className:"form-control",id:"description",placeholder:"Enter brand description",onChange:o,value:r.description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter brand email",onChange:o,value:r.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"isActivate",children:"Status"}),e.jsxs("select",{className:"form-control",id:"isActivate",onChange:o,value:r.isActivate,children:[e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]})]})]}),e.jsxs("div",{className:"inputs-btn",children:[e.jsx("button",{type:"button",onClick:b(r.id),children:"Update"}),e.jsx("button",{type:"submit",children:"Add"})]})]})}),e.jsx("div",{className:"dashOverview",style:{overflow:"auto"},children:e.jsx(y,{columns:j,data:x,handleChange:v})})]})};export{S as default};
