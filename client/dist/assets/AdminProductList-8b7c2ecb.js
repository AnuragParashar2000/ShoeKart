import{r as t,u as k,j as e,T as I,g as L,E as z,P as B,f as l,A as v}from"./index-eab7dac9.js";const M=()=>{const[d,m]=t.useState([]),[n,b]=t.useState(""),[f,y]=t.useState(""),[P,x]=t.useState(!0),[a,h]=t.useState(1),[j,_]=t.useState(10),[p,A]=t.useState(0),g=k(),S=a>1,w=a<p,D=s=>{h(s)},C=async()=>{try{const s=localStorage.getItem("jwtAdmin");if(!s)return l.error("Access denied.");const r=await v.get("/admin/products",{params:{limit:j,page:a,searchTerm:n},headers:{Authorization:s}});m(r.data.products),A(Math.ceil(r.data.count/j)),x(!1)}catch{x(!1)}},E=async(s,r)=>{var o,i;try{const c=localStorage.getItem("jwtAdmin");if(!c)return l.error("Access denied.");const N=await v.put(`/admin/product/${s}`,{},{headers:{Authorization:c}});if(N.data.success){const T=d.map(u=>(u._id===s&&(u.status=r),u));m(T),l.success(N.data.message)}}catch(c){l.error((i=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:i.message)}};return t.useEffect(()=>{const s=setTimeout(()=>{y(n)},700);return()=>clearTimeout(s)},[n]),t.useEffect(()=>{C()},[a,f]),P?e.jsx(I,{height:"500px"}):e.jsxs("div",{className:"orderMainContainer",children:[e.jsx("h1",{className:"cHeader",style:{textAlign:"left"},children:"Product List"}),e.jsxs("div",{className:"searchBar adminSearchBar",children:[e.jsxs("div",{className:"searchForm",children:[e.jsx("input",{type:"text",value:n,onChange:s=>b(s.target.value),placeholder:"What shoes are you looking for ?"}),e.jsx("div",{children:e.jsx(L,{})})]}),e.jsx("button",{style:{margin:"0"},onClick:()=>g("/admin/product/add"),className:"open-modal cart-delete-btn",type:"button",children:"Add Product"})]}),e.jsxs("div",{className:"orderContainer",style:{flexDirection:"column"},children:[e.jsxs("table",{className:"order-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"order-subheader order-th",style:{textAlign:"left"},children:"Product Details"}),e.jsx("th",{className:"order-subheader order-th ",children:"Brand"}),e.jsx("th",{className:"order-subheader order-th ",children:"Size(UK)"}),e.jsx("th",{className:"order-subheader order-th ",children:"Status"}),e.jsx("th",{className:"order-subheader order-th ",children:"Price"}),e.jsx("th",{className:"order-subheader order-th ",children:"Action"})]})}),e.jsx("tbody",{className:"order-table-tbody",children:d.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"order-td",children:e.jsx("div",{className:"order-td-div",children:e.jsxs("div",{className:"cart-product-cont",children:[e.jsx("div",{className:"cart-image-cont",children:e.jsx("img",{src:s.image,alt:"product",className:"cart-image"})}),e.jsxs("div",{className:"cart-product-details",children:[e.jsx("p",{className:"cart-name-cont",style:{width:"13rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.name}),e.jsx("p",{className:"cart-desc-cont",children:s.desc})]})]})},s._id)}),e.jsx("td",{className:"order-td",children:s.brand}),e.jsx("td",{className:"order-td",children:s.size.split(", ").map((o,i)=>e.jsxs("div",{children:[o,e.jsx("br",{})]},i))}),e.jsx("td",{className:"order-td",children:s.status}),e.jsxs("td",{className:"order-td",children:["â‚¹",s.price]}),e.jsx("td",{className:"order-td",children:e.jsxs("div",{className:"order-btn-cont",style:{flexDirection:"column"},children:[e.jsx("button",{className:"cart-delete-btn",onClick:()=>g(`/admin/product/update/${s.slug}`),children:"Edit"}),e.jsx("button",{className:"cart-delete-btn",onClick:()=>E(s._id,s.status==="Active"?"Inactive":"Active"),children:s.status==="Active"?"Deactivate":"Activate"})]})})]},r))})]}),(!d||d.length<=0)&&e.jsxs("div",{className:"empty-cart",children:[e.jsx("img",{src:z,alt:"empty-cart"}),e.jsx("p",{children:"No products have been added yet. Start adding some!"})]})]}),e.jsx(B,{totalPageCount:p,previousPage:()=>h(a-1),canPreviousPage:S,nextPage:()=>h(a+1),canNextPage:w,gotoPage:D,pageIndex:a-1})]})};export{M as default};
