import{r as d,j as t,T as w,f as r,A as l}from"./index-eab7dac9.js";import{C}from"./CustomerTable-6fc825d1.js";const D=()=>{const[f,h]=d.useState([]),[x,p]=d.useState(!0),m=async()=>{var s,o;try{const a=localStorage.getItem("jwtAdmin");if(!a)return r.error("Access denied. Please login first.");const e=await l.get("/category",{headers:{Authorization:a}});console.log(e.data),e.data.success&&h(e.data.categories),p(!1)}catch(a){r.error((o=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:o.message),p(!1)}};d.useEffect(()=>{m()},[]);const j=[{Header:"Name",accessor:"name"},{Header:"Description",accessor:"description"}],[n,u]=d.useState({id:"",name:"",description:""}),y=s=>{u({id:s._id,name:s.name,description:s.description})},i=()=>{u({id:"",name:"",description:""})},b=s=>async()=>{var o,a;try{if(!s)return r.error("Please select a brand to update.");const e=localStorage.getItem("jwtAdmin");if(!e)return r.error("Access denied.");const c=await l.put(`/category/${s}`,{...n},{headers:{Authorization:e}});r.success(c.data.message),h(c.data.categories),i()}catch(e){r.error((a=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:a.message),i()}},g=s=>{u({...n,[s.target.id]:s.target.value})},v=async s=>{var o,a;s.preventDefault();try{if(!n.name||!n.description)return r.error("Please fill all the fields.");const e=localStorage.getItem("jwtAdmin");if(!e)return r.error("Access denied.");const c=await l.post("/category",{...n},{headers:{Authorization:e}});r.success(c.data.message),m(),i()}catch(e){r.error((a=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:a.message)}},A=async s=>{var o,a;try{if(!s)return r.error("Please select a brand to delete.");const e=localStorage.getItem("jwtAdmin");if(!e)return r.error("Access denied.");const c=await l.delete(`/category/${s}`,{headers:{Authorization:e}});m(),i(),r.success(c.data.message)}catch(e){r.error((a=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:a.message)}};return x?t.jsx(w,{height:"500px"}):t.jsxs("div",{className:"dashboardMain",children:[t.jsx("h1",{children:"Category"}),t.jsx("div",{className:"dashOverview dash-forms",children:t.jsxs("form",{onSubmit:v,children:[t.jsxs("div",{className:"inputs",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"name",children:"Name"}),t.jsx("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter category name",onChange:g,value:n.name})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description",children:"Description"}),t.jsx("input",{type:"text",className:"form-control",id:"description",placeholder:"Enter brand description",onChange:g,value:n.description})]})]}),t.jsxs("div",{className:"inputs-btn",children:[t.jsx("button",{type:"button",onClick:b(n.id),children:"Update"}),t.jsx("button",{type:"button",onClick:()=>A(n.id),children:"Delete"}),t.jsx("button",{type:"submit",children:"Add"})]})]})}),t.jsx("div",{className:"dashOverview",style:{overflow:"auto"},children:t.jsx(C,{columns:j,data:f,handleChange:y})})]})};export{D as default};
